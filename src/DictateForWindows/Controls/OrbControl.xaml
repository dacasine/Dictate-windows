<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="DictateForWindows.Controls.OrbControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:DictateForWindows.Controls"
    Width="200"
    Height="200">

    <Grid HorizontalAlignment="Center" VerticalAlignment="Center">

        <!-- Layer 1: Ambient glow -->
        <Ellipse
            x:Name="AmbientGlow"
            Width="200"
            Height="200"
            Opacity="0.1">
            <Ellipse.Fill>
                <RadialGradientBrush>
                    <GradientStop Color="White" Offset="0"/>
                    <GradientStop Color="Transparent" Offset="1"/>
                </RadialGradientBrush>
            </Ellipse.Fill>
        </Ellipse>

        <!-- Layer 2: Pulse ring (recording indicator) â€” beyond the annular sectors (outer edge ~82px) -->
        <Ellipse
            x:Name="PulseRing"
            Width="190"
            Height="190"
            Fill="Transparent"
            StrokeThickness="1.5"
            Opacity="0">
            <Ellipse.Stroke>
                <SolidColorBrush x:Name="PulseRingStroke" Color="#0078D4"/>
            </Ellipse.Stroke>
        </Ellipse>

        <!-- Layer 3: Shockwave ring (confirm animation) -->
        <Ellipse
            x:Name="ShockwaveRing"
            Width="120"
            Height="120"
            Fill="Transparent"
            StrokeThickness="2"
            Opacity="0">
            <Ellipse.Stroke>
                <SolidColorBrush Color="White"/>
            </Ellipse.Stroke>
        </Ellipse>

        <!-- Layer 4: Main circle background -->
        <Ellipse
            x:Name="MainCircle"
            Width="120"
            Height="120"
            Opacity="0.85">
            <Ellipse.Fill>
                <SolidColorBrush Color="#0A0A0A"/>
            </Ellipse.Fill>
            <Ellipse.Stroke>
                <SolidColorBrush x:Name="MainCircleStroke" Color="#0078D4" Opacity="0.3"/>
            </Ellipse.Stroke>
            <Ellipse.StrokeThickness>1.5</Ellipse.StrokeThickness>
        </Ellipse>

        <!-- Layer 5: Amplitude ring (voice-reactive) -->
        <Ellipse
            x:Name="AmplitudeRing"
            Width="110"
            Height="110"
            Fill="Transparent"
            StrokeThickness="2"
            Opacity="0.7">
            <Ellipse.Stroke>
                <SolidColorBrush x:Name="AmplitudeRingStroke" Color="#0078D4"/>
            </Ellipse.Stroke>
            <Ellipse.RenderTransform>
                <ScaleTransform x:Name="AmplitudeScale" ScaleX="1" ScaleY="1" CenterX="55" CenterY="55"/>
            </Ellipse.RenderTransform>
        </Ellipse>

        <!-- Layer 6: Center content -->
        <Grid
            x:Name="CenterContent"
            Width="120"
            Height="120"
            HorizontalAlignment="Center"
            VerticalAlignment="Center">

            <!-- Microphone icon (idle/recording) -->
            <FontIcon
                x:Name="MicIcon"
                Glyph="&#xE720;"
                FontSize="32"
                Foreground="{StaticResource OrbTextPrimaryBrush}"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"/>

            <!-- Stop icon (recording - shown on hover) -->
            <FontIcon
                x:Name="StopIcon"
                Glyph="&#xE71A;"
                FontSize="24"
                Foreground="{StaticResource OrbTextPrimaryBrush}"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Visibility="Collapsed"/>

            <!-- Timer text (curved along bottom inner arc) -->
            <local:CurvedTextBlock
                x:Name="CurvedTimerText"
                Width="120"
                Height="120"
                Radius="42"
                StartAngle="90"
                IsClockwise="True"
                FontSize="11"
                LetterSpacing="0.55"
                Foreground="{StaticResource OrbTextPrimaryBrush}"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Visibility="Collapsed"/>

            <!-- Status text (curved along top inner arc) -->
            <local:CurvedTextBlock
                x:Name="CurvedStatusText"
                Width="120"
                Height="120"
                Radius="42"
                StartAngle="-90"
                IsClockwise="True"
                FontSize="10"
                LetterSpacing="0.55"
                Foreground="{StaticResource OrbTextPrimaryBrush}"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Visibility="Collapsed"/>

            <!-- Processing indicator -->
            <ProgressRing
                x:Name="ProcessingRing"
                IsActive="False"
                Width="48"
                Height="48"
                Foreground="White"
                Visibility="Collapsed"/>
        </Grid>

    </Grid>
</UserControl>

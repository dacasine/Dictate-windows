<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="DictateForWindows.Views.OrbWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:DictateForWindows.Controls"
    xmlns:vm="using:DictateForWindows.ViewModels"
    Title="Dictate Orb">

    <Grid
        x:Name="RootGrid"
        Background="Transparent">

        <!-- Prompts Grid (above the orb, 2-column grid) -->
        <Grid
            x:Name="PromptsGrid"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Margin="0,0,0,280"
            ColumnSpacing="4"
            RowSpacing="4"
            Visibility="Collapsed">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
        </Grid>

        <!-- Annular directional hints (ring sectors around the orb) -->
        <controls:AnnularHints
            x:Name="DirectionalHints"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Visibility="Collapsed"
            PromptLabel="{x:Bind ViewModel.ActivePromptName, Mode=OneWay}"/>

        <!-- The Orb (centered) -->
        <controls:OrbControl
            x:Name="OrbElement"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            AudioLevel="{x:Bind ViewModel.AudioLevel, Mode=OneWay}"
            IsRecording="{x:Bind ViewModel.IsRecording, Mode=OneWay}"
            IsPaused="{x:Bind ViewModel.IsPaused, Mode=OneWay}"
            IsProcessing="{x:Bind ViewModel.IsProcessing, Mode=OneWay}"
            Timer="{x:Bind ViewModel.TimerText, Mode=OneWay}"
            Status="{x:Bind ViewModel.StatusText, Mode=OneWay}"
            AccentColor="{x:Bind ViewModel.OrbAccentColor, Mode=OneWay}"/>

        <!-- Context Cards (2 cards below the orb) -->
        <StackPanel
            x:Name="ContextCardsPanel"
            Orientation="Horizontal"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Margin="0,200,0,0"
            Spacing="12"
            Visibility="Collapsed">
            <controls:ContextCard
                x:Name="ClipboardCard"
                Source="{x:Bind ViewModel.ClipboardContext, Mode=OneWay}"
                Command="{x:Bind ViewModel.ToggleContextCardCommand}"
                CommandParameter="{x:Bind ViewModel.ClipboardContext, Mode=OneWay}"/>
            <controls:ContextCard
                x:Name="ScreenshotCard"
                Source="{x:Bind ViewModel.ScreenshotContext, Mode=OneWay}"
                Command="{x:Bind ViewModel.ToggleContextCardCommand}"
                CommandParameter="{x:Bind ViewModel.ScreenshotContext, Mode=OneWay}"/>
        </StackPanel>

        <!-- Legacy Context Panel (kept for backward compat, hidden when cards are shown) -->
        <controls:ContextPanel
            x:Name="ContextPanelElement"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Margin="0,200,0,0"
            ContextString="{x:Bind ViewModel.SelectedContext, Mode=OneWay}"
            Visibility="Collapsed"/>

        <!-- Target Apps (right side, 2-column grid) -->
        <Grid
            x:Name="TargetAppsGrid"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Margin="280,0,0,0"
            ColumnSpacing="6"
            RowSpacing="6"
            Visibility="Collapsed">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
        </Grid>

    </Grid>
</Window>
